<!DOCTYPE html>
<html>
<head>
	<meta charset='UTF-8'>
	<title>Internet Security - Hardware Crypto Accelerator | Wenwei's tech Blog</title>
	<link rel='alternate' type='application/rss+xml' title='Wenwei Feed' href='http://weweng.github.io/atom.xml'>
	<meta name='description' content=''/>
	<meta name='keywords' content='Security Cryptography  hardware'/>
	<meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no'>
	<meta name='theme-color' content='#655B54'>
	<link rel='shortcut icon' href='/assets/favicon.ico' type='image/x-icon'> 
	<!--- <link rel='icon' href='/assets/favicon.ico' type='image/x-icon'> --->
<link rel='icon' href='/assets/blogger.png' type='image/x-png'>

	<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700' rel='stylesheet' type='text/css'>
	<link rel='stylesheet' type='text/css' href='/assets/css/code-highlighter.css' />
<link rel='stylesheet' type='text/css' href='/assets/css/default.min.css' />
<link rel='stylesheet' type='text/css' href='/assets/css/github.css' />
<link rel='stylesheet' type='text/css' href='/assets/css/pure-base-min.css' />
<link rel='stylesheet' type='text/css' href='/assets/css/pure-grids-responsive-min.css' />
<link rel='stylesheet' type='text/css' href='/assets/css/pure-menus-min.css' />
<link rel='stylesheet' type='text/css' href='/assets/css/pure-tables-min.css' />
<link rel='stylesheet' type='text/css' href='/assets/css/social-buttons.css' />
<link rel='stylesheet' type='text/css' href='/assets/css/weweng.css' />


	
</head>
<body>

<div class='pure-g' id='layout'>
    <div class='sidebar pure-u-1 pure-u-md-1-4'>
      <div class='header'>
	<nav class='nav'>
	  <ul class='nav-list'>
	    <li class='nav-item'>
	      <strong> <a href='/workblog.html'>Blog</a> </strong>
	    </li>
<!--
	    <li class='nav-item'>
	      <strong> <a href='/study/index.html'>Study</a> </strong>
	    </li>
	    <li class='nav-item'>
	      <strong> <a href='/projects/index.html'>Projects</a> </strong>
	    </li>
-->
<!--
            <li class='nav-item'>
              <strong> <a href='/services/index.html'>读书笔记</a> </strong>
            </li>
-->
	    <li class='nav-item'>
	      <strong><a href='/aboutme.html'>About Me</a></strong>
	    </li>
	</ul>
	</nav>
	<br> 
	<h1 class='brand-title'>
	  <a href='/index.html'>
		<img src='/assets/img/avatar.png' height='100'/>
	  </a>
	</h1>
      </div>
</div>

<div class='pure-u-1'>
	<div class='content'>
		<section class='post'>
	<header class='post-header'>
		<h2 class='post-title'> Internet Security - Hardware Crypto Accelerator </h2>
		<p class='post-meta'>
			Posted on <time class='date' datetime='2015-07-07T00:00:00+01:00'>07 Jul 2015</time>
		</p>
	</header>

	<div class='post-description'>
		<p>As internet is growing daily, network security is becoming a very important aspect to address. 
IPSec provides a way to encrypt/decrypt the IP packet, it is the foundation of Virtual Private Network. 
There are two ways to encrypt/decrypt IP packet: 
<ol>
  <li>software based: use main CPU cycle to execute software to have IP packet encrypted/decrypted. It can be more generic implementation (software wise), no additional hardware cost; however encryption/decryption is CPU intensive work, it causes CPU busy and low throughput.</li>
  <li>hardware based: use dedicate piece of hardware to perform packet encryption/decryption. It frees up main CPU, provide high throughput; however requires additionall hardware cost, and specific software driver to make it work.</li>
</ol></p>

<p>As internet traffic is increasing fast, the demand of higher IPSEc throughput is high. In fact, it creates a new business called &quot;Security Processor&quot;.
There are three main players: Cavium neworks, Freescale and Intel.</p>

<p>The following diagram shows how a typical way of security processor works in high level:</p>

<p><img src="/uploads/crypto/security-processor-model.jpg" alt="cryptography"></p>

<p>In this post, I will give a summary of three hardware cypto players.</p>

<!--more-->

<h1>Cavium networks: Nitrox series</h1>

<p>Cavium networks is the leader in security processor by providing Nitrox security processor. Nitrox V claims &quot;offer solutions delivering 500Mbps to 100Gbps of encryption bandwidth with 1K to 120K 2048b RSA operations per second&quot;.</p>

<p>Nitrox V is latest one it is offered (as of July 2015)</p>

<p>Features:
High performance security processing
<ol>
<li>15 Gbps to 100 Gbps Security Performance</li>
<li>45K to 300K ECC Ops/s (p256) </li>
<li>20K to 120K RSA Ops/s (2048 bit keys) </li>
<li>288 RISC engines with instruction space  </li>
</ol>
High-performance, industry standard compression 
<ol>
<li> 20 to 100 Gbps GZIP / LZS Compression </li>
</ol>
Virtualization
<ol>
<li>Single Root to IO Virtualization (SR-IOV) support in hardware</li>
<li>Up to 256 Virtual Functions </li>
</ol>
High-performance, industry standard interfaces</li>
<ol>
<li> Dual PCI-Express Gen 3 x4, x8 (100+ Gbps)</li>
<li> Dual Interlaken x8 lanes (100+ Gbps)</li>
</ol>
Wide variety of algorithms supported
<ol>
<li> IPSec, SSL, TLS 1.2, DTLS, ECC (p224, p256, p384, p521) </li>
<li> DES, 3DES, AES 256-bit (ECB, CBC, XCBC, CNTR, GCM)</li>
</ol>
Random Number Generator
<ol>
<li>FIPS 140-3 compliant True RNG</li>
</ol></p>

<p><img src="/uploads/crypto/security-processor-cavium.jpg" alt="cryptography"></p>

<p>Check http://www.cavium.com/processor_security.html for latest data.</p>

<p>Nitrox is widely used in security product like firewall, which requires high throughput.</p>

<h1>Freescale has developed a range of crypto accelerators, tailored to the applications of performance of various product lines.</h1>

<ol>
<li> Kinetis MCU mmCAU: Supports DES, 3DES, AES, MD5, SHA-1, and SHA-256 algorithms    </li>
<li> Kinetis MCU LTC: Cryptographic co-processor for AES, DES and public key cryptography </li>
<li> SEC 1.x - 3.x: Supports single algorithms, single pass ciphering and message integrity</li>
<li> SEC 4.x: Supports single algorithms, single pass ciphering and message integrity, and protocol encapsulations for IPSec, 802.1ae, SSL/TLS, SRTP, 802.11i, 802.16e </li>
<li> CAAM: The Cryptographic Accelerator and Assurance Module supports single algorithms, single pass ciphering and message integrity. The CAAM also supports platform assurance by providing configurable secure memory that can be automatically erased in the event of a platform security alarm.</li>
<li> DCP: The Data Co-Processor supports single algorithm processing.</li>
<li> SAHARA: The Symmetric / Asymmetric Hashing and Random Accelerator support single algorithm processing. SAHARA also supports platform assurance by providing configurable secure memory that can be automatically erased in the event of a platform security alarm.</li>
</ol>

<p>Freescale crypto accelerators is widely used in low to middle range of router.</p>

<h1>Intel QuickAssist Technology (QAT): Cryptographic and Compression Acceleration</h1>

<h2>Symmetric cryptography functions include</h2>

<ol>
<li>cipher operations (AES, DES,3DES, ARC4)</li>
<li>wireless (Kasumi,Snow 3G)</li>
<li>hash/authenticate operations (SHA-1, MD5, SHA-2[SHA-224, SHA-256, SHA-384, SHA-512])</li>
<li>authentication (HMAC, AESXCBC,AES-CCM); AES-XTS (Chipset 8925 and 8950 only)</li>
<li>random number generation.</li>
</ol>

<h2>Public Key functions include</h2>

<ol>
<li>RSA operation; </li>
<li>Diffie-Hellman operation; </li>
<li>digital signature standard operation; </li>
<li>key derivation operation; </li>
<li>elliptic curve cryptography (ECDSA and ECDH); </li>
<li>random number generation;</li> 
<li>prime number testing.</li>
</ol>

<h2>Compression/decompression include</h2>

<ol>
<li> DEFLATE (Lempel-Ziv 77) </li>
<li> LZS (Lempel-Ziv-Stac) </li>
</ol>

<p><img src="/uploads/crypto/security-processor-intel-1.jpg" alt="cryptography"></p>

<p>Intel provides open source driver which is linux based. It is realtively easy to use.</p>

<p><img src="/uploads/crypto/security-processor-intel-2.jpg" alt="cryptography"></p>

<p>This month, I had chance to work closely with Intel engineer to integarte Intel QAT driver into Cisco Classic IOS 
as an effort to provide HW crypto support in Cisco IOT gateway IR829/IR809. </p>

<p>Intel QAT driver is deisgned to run in Linux enviroment, and has about quater million lines of code. 
Three engineers worked intensively for three weeks, and complete the work which easily requires two engineers 
for half year work in a normal schedule. It was fun and challenging game, It is great time only if it is once or twice a year, 
certainly not always. Otherwise I certainly feel it will impact to my health and family life.</p>

<p>During the course of integration, there are a few technical difficulties resolved:
<ol>
<li> Modified large code base of Intel QAT driver, which was compiled using gcc and running in Linux kernel, 
so that it can be compiled using Intel Biendian Compiler ICC, and integrated into IOS image.</li>
<li> Endian issue between QAT15 driver and IOS: Intel QAT driver builds and run under little endian enviroment, 
however IOS builds and runs in big endian enviroment, unless it is explicitly specified to be little endian. 
Some types are defined in IOS big endian enviroment, leak into Intel QAT driver. An adapter layer has to be created between IOS and QAT driver. </li>
<li> Integrate Intel QAT driver into IOS RAW IPSEC framework. There was a bit struggle to decide between FULL IPSEC framework and RAW IPSEC framework 
as initially thought Intel QAT has equivalent capablity as chips from Cavium Nitrox series. It turns out to be not the case.One difference, 
during the first phase of establishsment of security associate, Intel QAT doesn&#39;t have capability to do so, this has to rely on IOS IPSEC framework. </li> 
<li> Performance tuning: hook up IXIA to feed high rate of traffic to IR829 for encryption and decryption. </li> 
</ol></p>

	</div>

<!--	
	<div class='share-button-container'>
		<p>Like it? Share it!</p>
		<div class='share-button share-button-twitter' data-share-url="http://weweng.github.io/2015/07/Hardware-Crypto/">
			<div clas='box'>
				<a href="https://twitter.com/share?url=http://weweng.github.io%2F2015%2F07%2FHardware-Crypto%2F&text=Internet Security - Hardware Crypto Accelerator&via=weweng" target='_blank'>
					<span class='share'>Tweet</span>
					<span class='count'>0</span>
				</a>
			</div>
		</div>

		<div class="share-button share-button-facebook" data-share-url="http://weweng.github.io/2015/07/Hardware-Crypto/">
			<div class="box">
				<a href="https://www.facebook.com/sharer/sharer.php?u=http://weweng.github.io%2F2015%2F07%2FHardware-Crypto%2F">
					<span class='share'>Share</span>
					<span class='count'>0</span>
				</a>
			</div>
		</div>
	</div>
-->

</section>

<div id='comments'>
	<div id='disqus_thread'></div>
	<script type='text/javascript'>
		var disqus_shortname = 'wewenggithubio';
		(function() {
			var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
	</script>

	<noscript>Please enable JavaScript to view the comments</noscript>
</div>
<script type='text/javascript' src='/assets/js/StaticShareButtons.js'></script>


	</div>

	<footer class='footer'>
		<span>Copyright 2015-2017, Wenwei Weng</span>
	</footer>
</div>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62997612-1', 'auto');
  ga('send', 'pageview');

</script>


<script type="text/javascript">
// Open external links in new tab
(window.onload = function(){
	var links = document.links;

	for(i=0; i<=links.length -1; i++){
		if(links[i].hostname != window.location.hostname){
			links[i].target = '_blank';
		}
	}
})();
</script>
</body>
</html>
